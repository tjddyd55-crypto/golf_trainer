# 빠른 시작 가이드 (실제 운영 환경)

## 🎯 목표
- PC에서 매장 등록 및 샷 수집 프로그램 실행
- 핸드폰에서 유저 로그인 및 타석 선택
- 샷 데이터가 유저 계정으로 기록되는지 확인

## 📋 사전 준비 체크리스트

### 1. Railway 서비스 URL 확인
Railway 대시보드에서 다음 URL들을 확인하고 기록하세요:

- [ ] **API 서비스**: `https://golf-api-production-e675.up.railway.app` (확인됨)
- [ ] **유저 서비스**: Railway에서 확인 필요
- [ ] **매장 관리자 서비스**: Railway에서 확인 필요
- [ ] **슈퍼 관리자 서비스**: Railway에서 확인 필요

### 2. PC 설정 파일 준비
- [x] `config/config.json` 파일 생성 완료 (기본값으로 생성됨)
- [ ] 실제 매장 ID와 타석 번호로 수정 필요

## 🚀 단계별 실행 가이드

### Step 1: 매장 등록 (PC)

1. **매장 관리자 서비스 접속**
   - Railway에서 확인한 매장 관리자 서비스 URL 접속
   - "매장 가입" 클릭

2. **매장 정보 입력**
   ```
   매장 아이디: TESTID
   매장명: 테스트매장
   비밀번호: (설정)
   전체 타석(룸) 수: 1
   ```

3. **가입 완료** → 슈퍼 관리자 승인 대기

### Step 2: 슈퍼 관리자 승인 (PC)

1. **슈퍼 관리자 서비스 접속**
   - Railway에서 확인한 슈퍼 관리자 서비스 URL 접속
   - 로그인: `admin` / `endolpin0!`

2. **매장 승인**
   - "매장 관리" → "매장 등록 요청" 확인
   - TESTID 매장 승인

### Step 3: PC 등록 (PC)

1. **등록 코드 확인/생성**
   - 슈퍼 관리자 페이지에서 등록 코드 확인
   - 없으면 새로 생성

2. **PC 등록 프로그램 실행**
   - `register_pc_gui.exe` 실행
   - **PC 등록 코드** 입력
   - **매장아이디**: `TESTID`
   - "조회" → "확인"
   - **타석번호**: `1번룸` (또는 `01번 타석`)
   - "등록 요청" 클릭

3. **슈퍼 관리자 승인**
   - 슈퍼 관리자 페이지에서 PC 승인
   - 사용 기간 설정 (필요시)

### Step 4: 좌표 설정 (PC)

1. **좌표 캘리브레이션 프로그램 실행**
   - `calibrate_regions_gui.exe` 실행
   - 브랜드 선택: `sg골프`
   - 좌표 영역 설정 (드래그로 영역 지정)
   - "저장 및 업로드" 클릭
   - 파일명 확인: `sg골프 v3` (또는 원하는 이름)

### Step 5: 샷 수집 프로그램 설정 (PC)

1. **`config/config.json` 파일 수정**
   ```json
   {
     "auto_brand": "sg골프",
     "auto_filename": "sg골프 v3",
     "store_id": "TESTID",
     "bay_id": "01",
     "API_BASE_URL": "https://golf-api-production-e675.up.railway.app"
   }
   ```
   - `store_id`: Step 1에서 등록한 매장 ID
   - `bay_id`: Step 3에서 등록한 타석 번호 (01, 02 형식)
   - `auto_brand`, `auto_filename`: Step 4에서 설정한 값

### Step 6: 샷 수집 프로그램 실행 (PC)

1. **프로그램 실행**
   - `GolfShotTracker.exe` 실행
   - 시스템 트레이에 아이콘 표시됨
   - `config.json`을 읽어서 자동 시작

2. **상태 확인**
   - 트레이 아이콘 우클릭 → "GUI 열기"
   - 로그에서 "PC 승인 확인" 메시지 확인
   - "샷 수집 시작" 메시지 확인

### Step 7: 유저 계정 생성 (핸드폰)

1. **유저 서비스 접속**
   - Railway에서 확인한 유저 서비스 URL 접속
   - "회원가입" 클릭

2. **회원가입 정보 입력**
   ```
   이름: (본인 이름)
   휴대폰번호: (본인 번호, 하이픈 포함)
   생년월일: (YYYY-MM-DD)
   성별: 남/여
   비밀번호: (설정)
   ```

3. **회원가입 완료**

### Step 8: 유저 로그인 및 타석 선택 (핸드폰)

1. **로그인**
   - 휴대폰번호 (하이픈 제외) 입력
   - 비밀번호 입력
   - "로그인" 클릭

2. **매장/타석 선택**
   - 매장 선택: `TESTID`
   - 타석 선택: `01번 타석`
   - "확인" 클릭
   - → 활성 세션 등록됨

### Step 9: 샷 데이터 기록 테스트

1. **골프 게임에서 샷 실행**
   - 샷 수집 프로그램이 샷을 감지

2. **PC 로그 확인**
   - 트레이 아이콘 우클릭 → "GUI 열기"
   - 로그에서 다음 메시지 확인:
     - `👤 현재 활성 사용자: [휴대폰번호]`
     - `[SHOT CONFIRMED] count=1, time=...`
     - `✅ 서버 전송 성공`

3. **매장 관리자 페이지에서 확인**
   - 매장 관리자 서비스 접속
   - TESTID 로그인
   - "01번 타석" → "샷 기록 보기"
   - 유저의 샷 데이터 확인

4. **유저 페이지에서 확인** (핸드폰)
   - 유저 로그인 상태
   - "전체 샷 기록 보기"
   - TESTID 매장 01번 타석의 샷 데이터 확인

## ⚠️ 문제 해결

### 문제 1: PC 등록 코드가 없음
**해결**: 슈퍼 관리자 페이지에서 등록 코드 생성

### 문제 2: 샷이 게스트로 저장됨
**원인**: 활성 세션이 없거나 store_id/bay_id 불일치

**해결**:
1. 유저가 정확히 매장/타석을 선택했는지 확인
2. `config.json`의 `store_id`와 `bay_id` 확인
3. 샷 수집 프로그램 로그에서 `👤 현재 활성 사용자:` 메시지 확인

### 문제 3: 좌표 파일을 찾을 수 없음
**해결**:
1. 좌표 캘리브레이션 프로그램으로 좌표 설정
2. 서버에 업로드 확인
3. `config.json`의 `auto_brand`와 `auto_filename` 확인

## 📝 체크리스트

### PC 설정
- [ ] 매장 등록 완료
- [ ] 슈퍼 관리자 승인 완료
- [ ] PC 등록 완료
- [ ] 슈퍼 관리자 PC 승인 완료
- [ ] 좌표 설정 및 업로드 완료
- [ ] `config/config.json` 파일 수정 완료
- [ ] 샷 수집 프로그램 실행 중

### 핸드폰 설정
- [ ] 유저 계정 생성 완료
- [ ] 유저 로그인 성공
- [ ] 매장/타석 선택 완료

### 테스트
- [ ] 샷 수집 프로그램에서 활성 사용자 조회 성공
- [ ] 샷 감지 및 서버 전송 성공
- [ ] 매장 관리자 페이지에서 샷 데이터 확인
- [ ] 유저 페이지에서 샷 데이터 확인
