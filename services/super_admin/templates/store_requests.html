<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>λ§¤μ¥ λ“±λ΅ μ”μ²­ μΉμΈ - Golf Trainer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/super_admin.css') }}">
</head>
<body>
    <div class="super-container">
        <div class="super-header">
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="text-white mb-0">π“‹ λ§¤μ¥ λ“±λ΅ μ”μ²­ μΉμΈ</h1>
                <a href="{{ url_for('super_admin_dashboard') }}" class="super-btn super-btn-secondary">β† λ€μ‹λ³΄λ“</a>
            </div>
        </div>
        
        <div class="super-main-content">
            {% if stores and stores|length > 0 %}
            <div class="table-responsive">
                <table class="super-table">
                    <thead>
                        <tr>
                            <th>λ§¤μ¥ μ½”λ“</th>
                            <th>λ§¤μ¥ μ΄λ¦„</th>
                            <th>νƒ€μ„ μ</th>
                            <th>μ”μ²­μΌ</th>
                            <th>μ‘μ—…</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for store in stores %}
                        <tr>
                            <td><strong>{{ store.store_id }}</strong></td>
                            <td>{{ store.store_name or '-' }}</td>
                            <td>{{ store.bays_count }}κ°</td>
                            <td>{{ store.requested_at.split(' ')[0] if store.requested_at else '-' }}</td>
                            <td>
                                <button class="btn btn-sm btn-success" onclick="approveStore('{{ store.store_id }}')">
                                    μΉμΈ
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="rejectStore('{{ store.store_id }}')">
                                    κ±°λ¶€
                                </button>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="alert alert-info">
                μΉμΈ λ€κΈ° μ¤‘μΈ λ§¤μ¥ λ“±λ΅ μ”μ²­μ΄ μ—†μµλ‹λ‹¤.
            </div>
            {% endif %}
        </div>
    </div>
    
    <script>
        function approveStore(storeId) {
            if (confirm(`λ§¤μ¥ '${storeId}'λ¥Ό μΉμΈν•μ‹κ² μµλ‹κΉ?`)) {
                fetch('{{ url_for("approve_store") }}', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({store_id: storeId})
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('λ§¤μ¥μ΄ μΉμΈλμ—μµλ‹λ‹¤.');
                        location.reload();
                    } else {
                        alert('μΉμΈ μ‹¤ν¨: ' + data.message);
                    }
                })
                .catch(error => {
                    alert('μ¤λ¥ λ°μƒ: ' + error);
                });
            }
        }
        
        function rejectStore(storeId) {
            if (confirm(`λ§¤μ¥ '${storeId}'λ¥Ό κ±°λ¶€ν•μ‹κ² μµλ‹κΉ?`)) {
                fetch('{{ url_for("reject_store") }}', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({store_id: storeId})
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('λ§¤μ¥μ΄ κ±°λ¶€λμ—μµλ‹λ‹¤.');
                        location.reload();
                    } else {
                        alert('κ±°λ¶€ μ‹¤ν¨: ' + data.message);
                    }
                })
                .catch(error => {
                    alert('μ¤λ¥ λ°μƒ: ' + error);
                });
            }
        }
    </script>
</body>
</html>
