<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§¤ì¥ ë“±ë¡ - Golf Trainer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #6f42c1;
        }
        .required-field::after {
            content: " *";
            color: red;
        }
    </style>
</head>
<body>
    <div style="display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(135deg, #6f42c1 0%, #8b5cf6 100%);">
        <div style="background: white; padding: 3rem; border-radius: 1rem; box-shadow: 0 10px 40px rgba(0,0,0,0.1); width: 100%; max-width: 600px;">
            <h3 class="text-center mb-4" style="color: #6f42c1;">ğŸ¢ ë§¤ì¥ ë“±ë¡</h3>
            
            {% if success %}
            <div class="alert alert-success">
                {{ success }}
            </div>
            {% endif %}
            
            {% if error %}
            <div class="alert alert-danger">
                {{ error }}
            </div>
            {% endif %}
            
            <form method="POST" id="signupForm">
                <!-- 1ë‹¨ê³„: í•„ìˆ˜ ì…ë ¥ -->
                <div class="form-section">
                    <div class="section-title">1ë‹¨ê³„: í•„ìˆ˜ ì…ë ¥</div>
                    
                    <div class="mb-3">
                        <label class="form-label required-field">ë§¤ì¥ì½”ë“œ (ì•„ì´ë””)</label>
                        <input type="text" name="store_id" id="store_id" class="form-control" 
                               placeholder="ì˜ë¬¸ ëŒ€ë¬¸ì+ìˆ«ì, 4-10ì (ì˜ˆ: GAJA001)" 
                               pattern="[A-Z][A-Z0-9]{3,9}" 
                               title="ì˜ë¬¸ ëŒ€ë¬¸ìë¡œ ì‹œì‘í•˜ê³ , ì˜ë¬¸ìì™€ ìˆ«ìë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. (4-10ì)"
                               required
                               oninput="this.value = this.value.replace(/[^A-Z0-9]/gi, '').toUpperCase()">
                        <small class="form-text text-muted">ì´ ë§¤ì¥ì½”ë“œê°€ ë¡œê·¸ì¸ ì•„ì´ë””ê°€ ë©ë‹ˆë‹¤.</small>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label required-field">ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" name="password" class="form-control" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label required-field">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                        <input type="password" name="password_confirm" class="form-control" placeholder="ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label required-field">ë§¤ì¥ëª…</label>
                        <input type="text" name="store_name" id="store_name" class="form-control" placeholder="ê°€ìê³¨í”„ OOì " required oninput="this.value = this.value.replace(/\s/g, '')">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label required-field">ì—°ë½ì²˜</label>
                        <input type="text" name="contact" id="contact" class="form-control" placeholder="010-1234-5678" maxlength="13" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label required-field">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</label>
                        <input type="text" name="business_number" id="business_number" class="form-control" placeholder="123-45-67890" maxlength="12" required>
                    </div>
                </div>
                
                <!-- 2ë‹¨ê³„: ì„ íƒ ì…ë ¥ -->
                <div class="form-section">
                    <div class="section-title">2ë‹¨ê³„: ì„ íƒ ì…ë ¥</div>
                    
                    <div class="mb-3">
                        <label class="form-label">ì´ë¦„</label>
                        <input type="text" name="owner_name" class="form-control" placeholder="ë§¤ì¥ ëŒ€í‘œì ì´ë¦„">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">ìƒë…„ì›”ì¼</label>
                        <input type="text" name="birth_date" id="birth_date" class="form-control" placeholder="1984-02-18" maxlength="10">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">ì´ë©”ì¼</label>
                        <input type="email" name="email" class="form-control" placeholder="example@email.com">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">ì£¼ì†Œ</label>
                        <input type="text" name="address" class="form-control" placeholder="ë§¤ì¥ ì£¼ì†Œ (ì„ íƒì‚¬í•­)">
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary w-100 py-3 mt-2">ë§¤ì¥ ë“±ë¡í•˜ê¸°</button>
            </form>
            
            <div class="mt-3 text-center">
                <a href="{{ url_for('store_admin_login') }}" class="text-secondary text-decoration-none">ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
            </div>
        </div>
    </div>
    
    <script>
        // ìƒë…„ì›”ì¼ ìë™ í¬ë§·íŒ… (YYYY-MM-DD)
        document.getElementById('birth_date').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9]/g, '');
            if (value.length >= 5) {
                value = value.substring(0, 4) + '-' + value.substring(4);
            }
            if (value.length >= 8) {
                value = value.substring(0, 7) + '-' + value.substring(7, 9);
            }
            e.target.value = value;
        });

        // ì—°ë½ì²˜(íœ´ëŒ€í° ë²ˆí˜¸) ìë™ í¬ë§·íŒ… (010-1234-5678)
        document.getElementById('contact').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9]/g, '');
            let formatted = value;
            if (value.length >= 4) {
                formatted = value.substring(0, 3) + '-' + value.substring(3);
            }
            if (value.length >= 8) {
                formatted = value.substring(0, 3) + '-' + value.substring(3, 7) + '-' + value.substring(7, 11);
            }
            e.target.value = formatted;
        });

        // ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ìë™ í¬ë§·íŒ… (123-45-67890)
        document.getElementById('business_number').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9]/g, '');
            let formatted = value;
            if (value.length >= 4) {
                formatted = value.substring(0, 3) + '-' + value.substring(3);
            }
            if (value.length >= 7) {
                formatted = value.substring(0, 3) + '-' + value.substring(3, 5) + '-' + value.substring(5, 10);
            }
            e.target.value = formatted;
        });

        // ë¹„ë°€ë²ˆí˜¸ í™•ì¸
        document.getElementById('signupForm').addEventListener('submit', function(e) {
            const password = document.querySelector('input[name="password"]').value;
            const passwordConfirm = document.querySelector('input[name="password_confirm"]').value;
            
            if (password !== passwordConfirm) {
                e.preventDefault();
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return false;
            }
            
            // ë§¤ì¥ì½”ë“œ í˜•ì‹ ê²€ì¦
            const storeId = document.querySelector('input[name="store_id"]').value;
            const storeIdPattern = /^[A-Z][A-Z0-9]{3,9}$/;
            if (!storeIdPattern.test(storeId)) {
                e.preventDefault();
                alert('ë§¤ì¥ì½”ë“œëŠ” ì˜ë¬¸ ëŒ€ë¬¸ìë¡œ ì‹œì‘í•˜ê³ , ì˜ë¬¸ìì™€ ìˆ«ìë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. (4-10ì)');
                return false;
            }
        });
    </script>
</body>
</html>
